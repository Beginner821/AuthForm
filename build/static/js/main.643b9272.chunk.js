(this.webpackJsonpq=this.webpackJsonpq||[]).push([[0],{115:function(n,t,e){},116:function(n,t,e){},237:function(n,t,e){"use strict";e.r(t);var o,a,r,i,c,s,u,l,b,d=e(0),j=e(48),p=e.n(j),m=(e(115),e(116),e(7)),f=e(15),g=e(16),h="SET_USER_DATA",x="SET_AUTH",O="SET_ERROR",w=(g.a.button(o||(o=Object(f.a)(["\n    background: rgb(255, 165, 0);\n    width: 100%;\n    border-radius: 10px;\n    font-size: 30px;\n    color:white;\n    padding: 7px;\n    cursor:pointer;\n"]))),g.a.div(a||(a=Object(f.a)(["\n    background: black;\n    border-radius: 10px;\n    padding: 50px;\n    display: flex;\n    flex-direction: column;\n    text-align:center;\n    font-family: 'Times New Roman', Times, serif; \n    font-size: 250%; \n    color: white;\n    font-weight: bold;\n    color: rgb(176, 196, 222);\n    width: 30%;\n    position: absolute;\n    left: 31%;\n    top: 23%;\n"])))),v=g.a.label(r||(r=Object(f.a)(["\n    margin: 30px 120px;\n    color:white;\n"]))),_=g.a.div(i||(i=Object(f.a)(["\n    display:flex;\n    flex-direction: column;\n    text-align:left;\n    font-weight: normal;\n"]))),k=g.a.label(c||(c=Object(f.a)(["\n    margin-bottom: 10px;\n"]))),E=(g.a.input(s||(s=Object(f.a)(["\n    margin-bottom: 20px;\n    background: rgb(211, 211, 211);\n    height:30px;\n    border-radius: 7px;\n    padding-bottom: 9px;\n    padding-top: 9px;\n    padding-left:20px;\n    font-weight: bold;\n    font-size: 20px;\n"]))),g.a.div(u||(u=Object(f.a)(["\n    border-radius: 10px;\n    background-color: black;\n    height: 130px;\n    width: 400px;\n    position: absolute;\n    left: 39%;\n    top: 39%;\n    font-family: 'Times New Roman', Times, serif; \n    font-size: 150%; \n    color: rgb(176, 196, 222);\n    font-weight: bold;\n"])))),y=g.a.div(l||(l=Object(f.a)(["\n    position: relative;\n    height: 100%;\n"]))),S=g.a.div(b||(b=Object(f.a)(["\n    position: relative;\n    background-image: url(https://img.gazeta.ru/files3/979/10633979/upload-simpsons29-pic4_zoom-1500x1500-85586.jpg);\n    background-size: cover;\n    height:100%;  \n"]))),N=e(239),T=e(29),A=e.n(T),I=function(n){if(!n)return"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},z=function(n){return function(t){if(t.length>n)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f ".concat(n," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}},R=e(3),U=z(20),L=function(){return Object(R.jsxs)(_,{children:[Object(R.jsx)(k,{children:"Email"}),Object(R.jsx)(N.a,{className:A.a.input,validate:[I,U],placeholder:"Enter your email",name:"email",type:"text",component:"input"})]})},q=z(15),C=function(){return Object(R.jsxs)(_,{children:[Object(R.jsx)(k,{children:" Password "}),Object(R.jsx)(N.a,{className:A.a.input,validate:[I,q],placeholder:"Enter your password",name:"password",type:"password",component:"input"})]})},J=e(238),M=e(9),W=e(27),B=e(39),D=e.n(B);D.a.defaults.baseURL=" https://api.englishpatient.org",D.a.defaults.headers.common["Content-Type"]="application/json";var F,H={user:{},isAuth:!1,error:{isError:!1,message:""}},K=function(n){return{type:x,isAuth:n}},P=function(n,t){return{type:O,isError:n,errorMessage:t}},Q=function(){return function(n){D.a.get("/me?token=".concat(localStorage.getItem("token"))).then((function(t){var e,o=t.data.result.user;n((e={lastName:o.lastName,firstName:o.firstName,email:o.email},{type:h,data:e})),n(K(!0))}))}},V=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(W.a)(Object(W.a)({},n),{},{user:t.data});case x:return Object(W.a)(Object(W.a)({},n),{},{isAuth:t.isAuth});case O:return Object(W.a)(Object(W.a)({},n),{},{error:t});default:return n}},G=g.a.div(F||(F=Object(f.a)(["\n  color:red;\n  font-size: 25px;\n  margin-bottom: 7px;\n  padding-bottom: 7px;\n"]))),X=Object(J.a)({form:"auth"})((function(n){var t=Object(M.d)((function(n){return n.user.isAuth})),e=Object(M.d)((function(n){return n.user.error.errorMessage}));return console.log("Is auth? ",t),t?Object(R.jsx)(m.a,{to:"/"}):Object(R.jsx)(w,{children:Object(R.jsxs)("form",{onSubmit:n.handleSubmit,children:[Object(R.jsx)(v,{children:" Sign in "}),Object(R.jsx)(L,{}),Object(R.jsx)(C,{}),Object(R.jsx)(G,{children:e||""}),Object(R.jsx)("button",{className:A.a.button,children:"Log in"})]})})})),Y=function(){var n=Object(M.c)();return Object(R.jsx)(X,{onSubmit:function(t){var e,o;console.log("Email: ",t.email,"password: ",t.password),n((e=t.email,o=t.password,function(n){D.a.post("/login",{email:e,password:o}).then((function(t){(t.data.token?localStorage.setItem("token",t.data.token):n(P(!0,t.data.error.message)))&&console.log(""),n(Q())}))}))}})},Z=function(){var n=Object(M.d)((function(n){return n.user.user})),t=Object(M.c)();if(console.log("User data",n),!Object(M.d)((function(n){return n.user.isAuth})))return Object(R.jsx)(m.a,{to:"/"});return Object(R.jsx)(y,{children:Object(R.jsxs)(E,{children:[Object(R.jsxs)("p",{children:["Email: ",n.email]}),Object(R.jsxs)("p",{children:["Full name: ",n.firstName+" "+n.lastName]}),Object(R.jsx)("button",{onClick:function(){localStorage.removeItem("token"),t(K(!1)),t(P(!1,""))},children:" Log out"})]})})},$=function(){var n=Object(M.c)();return Object(d.useEffect)((function(){localStorage.getItem("token")&&n(Q())}),[n]),Object(R.jsx)(S,{children:Object(R.jsx)(m.b,{exact:!0,path:"/",render:function(){return localStorage.getItem("token")?Object(R.jsx)(Z,{}):Object(R.jsx)(Y,{})}})})};var nn=function(){return Object(R.jsx)($,{})},tn=e(35),en=e(8),on=e(110),an=e(240),rn=Object(en.c)({user:V,form:an.a}),cn=Object(en.d)(rn,Object(en.a)(on.a));p.a.render(Object(R.jsx)(tn.a,{children:Object(R.jsx)(M.a,{store:cn,children:Object(R.jsx)(nn,{})})}),document.getElementById("root"))},29:function(n,t,e){n.exports={input:"input_input__3fKdu",button:"input_button__3na-n",signIn:"input_signIn__lQEgL",label:"input_label__3ulUa",mainWindow:"input_mainWindow__3VLU4"}}},[[237,1,2]]]);
//# sourceMappingURL=main.643b9272.chunk.js.map