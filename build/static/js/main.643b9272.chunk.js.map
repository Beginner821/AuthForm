{"version":3,"sources":["Redux/constants.js","validators/validators.js","loginForm/email.js","loginForm/password.js","Redux/reducer.js","Components/auth.js","Components/profile.js","Components/renderComponent.js","App.js","Redux/reduxStore.js","index.js","loginForm/input.module.css"],"names":["SET_USER_DATA","SET_AUTH","SET_ERROR","MainWindow","styled","button","div","SignIn","label","Form","Label","TableInfo","input","ContentWrapper","Container","requiredField","value","maxLengthCreator","maxLength","length","maxLength20","Email","Field","className","s","validate","placeholder","name","type","component","maxLength15","Password","axios","defaults","baseURL","headers","common","initialState","user","isAuth","error","isError","message","setAuth","status","setError","errorMessage","getUser","dispatch","get","localStorage","getItem","then","response","data","result","lastName","firstName","email","userReducer","state","action","ErrorContainer","AuthReduxForm","reduxForm","form","props","useSelector","messageError","console","log","to","onSubmit","handleSubmit","Login","useDispatch","values","password","post","token","setItem","Profile","userData","onClick","removeItem","RenderComponent","useEffect","exact","path","render","App","reducers","combineReducers","formReducer","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.643b9272.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const SET_USER_DATA = \"SET_USER_DATA\"\nexport const SET_AUTH = \"SET_AUTH\"\nexport const SET_ERROR = \"SET_ERROR\"\n\nexport const LogBtn = styled.button`\n    background: rgb(255, 165, 0);\n    width: 100%;\n    border-radius: 10px;\n    font-size: 30px;\n    color:white;\n    padding: 7px;\n    cursor:pointer;\n`;\n\nexport const MainWindow = styled.div`\n    background: black;\n    border-radius: 10px;\n    padding: 50px;\n    display: flex;\n    flex-direction: column;\n    text-align:center;\n    font-family: 'Times New Roman', Times, serif; \n    font-size: 250%; \n    color: white;\n    font-weight: bold;\n    color: rgb(176, 196, 222);\n    width: 30%;\n    position: absolute;\n    left: 31%;\n    top: 23%;\n`;\n\nexport const SignIn = styled.label`\n    margin: 30px 120px;\n    color:white;\n`;\n\nexport const Form = styled.div`\n    display:flex;\n    flex-direction: column;\n    text-align:left;\n    font-weight: normal;\n`;\n\nexport const Label = styled.label`\n    margin-bottom: 10px;\n`;\n\nexport const Input = styled.input`\n    margin-bottom: 20px;\n    background: rgb(211, 211, 211);\n    height:30px;\n    border-radius: 7px;\n    padding-bottom: 9px;\n    padding-top: 9px;\n    padding-left:20px;\n    font-weight: bold;\n    font-size: 20px;\n`;\n\n\nexport const TableInfo = styled.div`\n    border-radius: 10px;\n    background-color: black;\n    height: 130px;\n    width: 400px;\n    position: absolute;\n    left: 39%;\n    top: 39%;\n    font-family: 'Times New Roman', Times, serif; \n    font-size: 150%; \n    color: rgb(176, 196, 222);\n    font-weight: bold;\n`;\n\nexport const ContentWrapper = styled.div`\n    position: relative;\n    height: 100%;\n`;\n\nexport const Container = styled.div`\n    position: relative;\n    background-image: url(https://img.gazeta.ru/files3/979/10633979/upload-simpsons29-pic4_zoom-1500x1500-85586.jpg);\n    background-size: cover;\n    height:100%;  \n`;","export const requiredField = (value) => {\n    if (value) return undefined;\n    return \"Поле обязательно для заполнения\";\n}\n\nexport const maxLengthCreator = (maxLength) => (value) =>{\n    if (value.length > maxLength) return `Максимальная длина поля ${maxLength} символов`;\n    return undefined;\n}","import React from 'react';\nimport {Form, Label} from \"../Redux/constants\";\nimport {Field} from \"redux-form\";\nimport s from \"./input.module.css\";\nimport {maxLengthCreator, requiredField} from \"../validators/validators\";\n\n\nconst maxLength20 = maxLengthCreator(20);\n\nlet Email = () => {\n\n    return (\n        <Form>\n            <Label>\n                Email\n            </Label>\n            <Field className={s.input} validate={[requiredField, maxLength20]} placeholder=\"Enter your email\" name=\"email\" type=\"text\" component=\"input\"/>\n        </Form>\n    )\n}\n\nexport default Email;","import React from 'react';\nimport {Form, Label} from \"../Redux/constants\";\nimport {Field} from \"redux-form\";\nimport s from \"./input.module.css\";\nimport {maxLengthCreator, requiredField} from \"../validators/validators\";\n\nconst maxLength15 = maxLengthCreator(15);\n\nlet Password = () => {\n\n    return (\n        <Form>\n            <Label> Password </Label>\n            <Field className={s.input} validate={[requiredField, maxLength15]} placeholder=\"Enter your password\" name = \"password\" type = \"password\" component=\"input\"/>\n        </Form>\n    )\n}\n\nexport default Password;","import axios from \"axios\";\nimport {SET_AUTH, SET_ERROR, SET_USER_DATA} from \"./constants\";\n\naxios.defaults.baseURL = ' https://api.englishpatient.org';\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\nlet initialState = {\n    user: {},\n    isAuth: false,\n    error: {\n        isError: false,\n        message: \"\"\n    }\n}\n\nlet userReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_USER_DATA:\n            return {...state, user: action.data}\n        case SET_AUTH:\n            return {...state, isAuth: action.isAuth}\n        case SET_ERROR:\n            return {...state, error: action}\n        default:\n            return state;\n    }\n};\n\nexport const setAuth = (status) => ({\n    type: SET_AUTH,\n    isAuth: status\n})\n\nconst setUsersData = (data) => ({\n    type: SET_USER_DATA,\n    data: data\n})\n\nexport const setError = (status, errorMessage) => ({\n    type: SET_ERROR,\n    isError: status,\n    errorMessage: errorMessage\n})\n\nexport const getUserToken = (email, password) => (\n    (dispatch) => {\n        axios.post(\"/login\", {email, password}).then(\n            response => {\n                if(response.data.token\n                    ? localStorage.setItem(\"token\", response.data.token)\n                    : dispatch(setError(true, response.data.error.message)))\n                    console.log(\"\")\n                dispatch(getUser());\n            }\n        )\n    }\n)\n\n\nexport const getUser = () => (\n    (dispatch) => {\n        axios.get(`/me?token=${localStorage.getItem(\"token\")}`).then(\n            response => {\n                const user = response.data.result.user\n                dispatch(setUsersData({lastName: user.lastName,\n                    firstName: user.firstName,\n                    email: user.email}));\n                dispatch(setAuth(true));\n            }\n        )\n    }\n)\n\nexport default userReducer;\n\n\n","import React from \"react\";\nimport Email from \"../loginForm/email\";\nimport Password from \"../loginForm/password\";\nimport {MainWindow, SignIn} from \"../Redux/constants\";\nimport {reduxForm} from \"redux-form\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getUserToken} from \"../Redux/reducer\";\nimport s from \"../loginForm/input.module.css\"\nimport {Redirect} from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst ErrorContainer = styled.div`\n  color:red;\n  font-size: 25px;\n  margin-bottom: 7px;\n  padding-bottom: 7px;\n`;\n\nlet Auth = (props) => {\n    const isAuth = useSelector(state => state.user.isAuth)\n    const messageError = useSelector(state => state.user.error.errorMessage);\n    console.log(\"Is auth? \", isAuth);\n\n    if (isAuth) return <Redirect to=\"/\"/>\n    return (\n        <MainWindow>\n            <form onSubmit={props.handleSubmit}>\n                <SignIn> Sign in </SignIn>\n                <Email/>\n                <Password/>\n                <ErrorContainer>\n                    {messageError ? messageError : \"\"}\n                </ErrorContainer>\n                <button className={s.button}>\n                    Log in\n                </button>\n            </form>\n        </MainWindow>\n    )\n}\nlet AuthReduxForm = reduxForm({form: \"auth\"})(Auth)\n\nlet Login = () => {\n    const dispatch = useDispatch();\n    const onSubmit = (values) => {\n        console.log (\"Email: \", values.email, \"password: \", values.password)\n        dispatch(getUserToken(values.email, values.password))\n    }\n    return (\n        <AuthReduxForm onSubmit={onSubmit}/>)\n}\n\nexport default Login;\n","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {ContentWrapper, TableInfo} from \"../Redux/constants\"\nimport {setAuth, setError} from \"../Redux/reducer\";\nimport {Redirect} from \"react-router-dom\";\n\nlet Profile = () => {\n    const userData = useSelector(state => state.user.user);\n    const dispatch = useDispatch();\n    console.log(\"User data\", userData);\n    const isAuth = useSelector(state => state.user.isAuth)\n    if (!isAuth) return <Redirect to=\"/\"/>\n\n    const logOut = () => {\n        localStorage.removeItem(\"token\")\n        dispatch(setAuth(false));\n        dispatch(setError(false, \"\"))\n    }\n\n    return (\n        <ContentWrapper>\n            <TableInfo>\n                <p>Email: {userData.email}</p>\n                <p>Full name: {userData.firstName + \" \" + userData.lastName}</p>\n                <button onClick={logOut}> Log out</button>\n            </TableInfo>\n        </ContentWrapper>\n    )\n}\n\nexport default Profile;","import React, {useEffect} from 'react';\nimport {Route} from \"react-router-dom\";\nimport Auth from \"./auth\";\nimport Profile from \"./profile\";\nimport {Container} from \"../Redux/constants\";\nimport {getUser} from \"../Redux/reducer\";\nimport {useDispatch} from \"react-redux\";\n\nexport let RenderComponent = () => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        if (localStorage.getItem(\"token\")) {\n            dispatch(getUser())\n        }\n    }, [dispatch]);\n    return (\n        <Container>\n            <Route exact path=\"/\" render={() => localStorage.getItem(\"token\") ? <Profile/> : <Auth/>}/>\n        </Container>\n    )\n}\n\n","import './App.css';\nimport React from \"react\";\nimport {RenderComponent} from \"./Components/renderComponent\";\n\nfunction App() {\n    return (\n        <RenderComponent/>\n    )\n}\n\nexport default App;\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\nimport thunk from \"redux-thunk\";\nimport userReducer from \"./reducer\";\nimport {reducer as formReducer} from \"redux-form\";\n\n\nlet reducers = combineReducers({\n    user: userReducer,\n    form: formReducer\n});\n\nlet store = createStore(reducers, applyMiddleware(thunk));\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\nimport store from \"./Redux/reduxStore\";\n\nReactDOM.render(\n    <BrowserRouter>\n        <Provider store={store}>\n        <App/>\n        </Provider>\n    </BrowserRouter>,\n    document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"input_input__3fKdu\",\"button\":\"input_button__3na-n\",\"signIn\":\"input_signIn__lQEgL\",\"label\":\"input_label__3ulUa\",\"mainWindow\":\"input_mainWindow__3VLU4\"};"],"sourceRoot":""}